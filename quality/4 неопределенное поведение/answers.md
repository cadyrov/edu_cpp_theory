# Ответы на тест по неопределенному поведению в C++

## Правильные ответы:

1. **c** - Неопределенное поведение (обращение за границы массива)

2. **b** - `int val = vec.at(index);` (метод at() проверяет границы и выбрасывает исключение)

3. **c** - Неопределенное поведение (двойное удаление указателя)

4. **c** - Неопределенное поведение при n = INT_MAX (переполнение знакового типа)

5. **b** - Модификация контейнера во время итерации (инвалидация итераторов)

6. **c** - Неопределенное поведение (возврат ссылки на локальную переменную)

7. **c** - Неопределенное поведение из-за гонки данных (data race)

8. **b** - Поведение определено: y == 0 (переполнение unsigned определено стандартом)

9. **b** - temp уничтожается, string_view становится недействительным

10. **c** - GCC с оптимизацией, предполагая отсутствие UB

11. **b** - Неопределенное поведение (чтение неактивного члена union)

12. **b** - Выход за границы массива (массив содержит 5 элементов, но цикл идет до 6)

13. **c** - Неопределенное поведение (использование moved-from объекта без гарантий)

14. **b** - UndefinedBehaviorSanitizer (для runtime обнаружения UB)

15. **b** - Итератор может быть инвалидирован после resize

16. **c** - Неопределенное поведение (неопределенная последовательность вычислений)

17. **c** - Неопределенное поведение (разыменование nullptr)

18. **d** - Варианты b и c правильные (проверка до операции и использование большего типа)

19. **b** - Неопределенное поведение (использование инвалидированного итератора)

20. **b** - Двойное удаление памяти (нарушение правила трех/пяти)

21. **b** - Всегда true (из-за UB и оптимизации компилятора)

22. **b** - Сохранение указателей на локальные переменные

23. **b** - Неопределенное поведение (нарушение strict aliasing)

24. **d** - Варианты b и c правильные (size_t всегда >= 0, at() безопасен)

25. **d** - Код корректен, moved-from объекты могут использоваться (но значение не определено)

26. **b** - Компилятор может удалить весь код после *p = 42 (dead code elimination)

27. **b** - Неопределенное поведение при создании ptr (указательная арифметика за границами)

28. **b** - Отсутствие проверки file на nullptr (fopen может вернуть NULL)

29. **a** - Неопределенное поведение (переполнение стека)

30. **c** - Использовать remove_if + erase idiom

31. **b** - Доступ к shared_vector без синхронизации в thread2

32. **b** - Неопределенное поведение (разыменование указателя past-the-end)

33. **b** - result содержит битовое представление части d (но это может быть UB)

34. **b** - Забыли вызвать деструктор явно (для placement new нужен явный вызов деструктора)

35. **b** - Неопределенное поведение при использовании указателя

36. **b** - Потенциальная утечка памяти при раннем выходе

37. **b** - Итератор указывает на временный объект (который уничтожается)

38. **b** - Неопределенное поведение (чтение неинициализированной переменной)

39. **b** - Возможно неопределенное поведение при неправильном индексе

40. **d** - Все перечисленные могут помочь (разные инструменты для разных аспектов) 